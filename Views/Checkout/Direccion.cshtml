<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Información de Envío</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="~/css/Direccion.css">
</head>
<body>
    <div class="container mt-4 mb-5">
        <!-- Header con logo y ayuda -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div class="logo">
                <h2 class="text-success fw-bold">tienda<span class="text-dark">.com</span></h2>
            </div>
            <div class="help-text">
                <span class="text-muted">¿Necesitas ayuda para comprar? Llámanos al: </span>
                <span class="fw-bold">203-7064</span>
            </div>
        </div>

        <!-- Indicador de progreso -->
        <div class="progress-container mb-5">
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <div class="step-container">
                <div class="step completed" id="step-1">
                    <div class="step-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="step-text">Carro</div>
                </div>
                
                <div class="step active" id="step-2">
                    <div class="step-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="step-text">Información de envío</div>
                </div>
                
                <div class="step" id="step-3">
                    <div class="step-icon">
                        <i class="fas fa-truck"></i>
                    </div>
                    <div class="step-text">Entrega</div>
                </div>
                
                <div class="step" id="step-4">
                    <div class="step-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="step-text">Pago</div>
                </div>
            </div>
        </div>

        <!-- Contenido principal -->
        <div class="main-content">
            <!-- Información de envío -->
            <div class="card">
                <div class="card-header bg-white">
                    <h4 class="mb-0">Ingresa tu dirección</h4>
                    <p class="text-muted mb-0">para ver las opciones de entrega y retiro</p>
                </div>
                <div class="card-body">
                    <form id="shipping-form">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="departamento" class="form-label">Departamento</label>
                                <select class="form-select" id="departamento" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="LIMA" selected>LIMA</option>
                                    <option value="AREQUIPA">AREQUIPA</option>
                                    <option value="CUSCO">CUSCO</option>
                                </select>
                                <div class="invalid-feedback">
                                    Por favor selecciona un departamento.
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="provincia" class="form-label">Provincia</label>
                                <select class="form-select" id="provincia" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="LIMA" selected>LIMA</option>
                                    <option value="CALLAO">CALLAO</option>
                                </select>
                                <div class="invalid-feedback">
                                    Por favor selecciona una provincia.
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="distrito" class="form-label">Distrito</label>
                                <select class="form-select" id="distrito" required>
                                    <option value="">Seleccionar...</option>
                                    <option value="SAN JUAN DE LURIGANCHO" selected>SAN JUAN DE LURIGANCHO</option>
                                    <option value="MIRAFLORES">MIRAFLORES</option>
                                    <option value="SAN ISIDRO">SAN ISIDRO</option>
                                </select>
                                <div class="invalid-feedback">
                                    Por favor selecciona un distrito.
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="direccion" class="form-label">Avenida/Calle/Jirón</label>
                                <input type="text" class="form-control" id="direccion" value="AAHH JUAN LANDAZURI MZ D LT 7" required>
                                <div class="invalid-feedback">
                                    Por favor ingresa una dirección.
                                </div>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="numero" class="form-label">Número</label>
                                <input type="text" class="form-control" id="numero" value="7" required>
                                <div class="invalid-feedback">
                                    Por favor ingresa un número.
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="complemento" class="form-label">Dpto./Interior/Piso/Lote/Bloque (opcional)</label>
                                <input type="text" class="form-control" id="complemento">
                            </div>
                        </div>
                        <div class="d-flex justify-content-between mt-4">
                            <button type="button" class="btn btn-outline-secondary" id="discard-changes-btn">Descartar cambios</button>
                            <button type="submit" class="btn btn-primary" id="confirm-address-btn">Confirmar dirección</button>
                            
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
<a href="@Url.Action("Entrega", "Checkout")" class="btn btn-success mt-4">Siguiente</a>


    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- JavaScript personalizado -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const shippingForm = document.getElementById('shipping-form');
            const discardChangesBtn = document.getElementById('discard-changes-btn');
            
            // Validar formulario de dirección
            function validateShippingForm() {
                const departamento = document.getElementById('departamento');
                const provincia = document.getElementById('provincia');
                const distrito = document.getElementById('distrito');
                const direccion = document.getElementById('direccion');
                const numero = document.getElementById('numero');
                
                let isValid = true;
                
                if (!departamento.value) {
                    departamento.classList.add('is-invalid');
                    isValid = false;
                } else {
                    departamento.classList.remove('is-invalid');
                }
                
                if (!provincia.value) {
                    provincia.classList.add('is-invalid');
                    isValid = false;
                } else {
                    provincia.classList.remove('is-invalid');
                }
                
                if (!distrito.value) {
                    distrito.classList.add('is-invalid');
                    isValid = false;
                } else {
                    distrito.classList.remove('is-invalid');
                }
                
                if (!direccion.value) {
                    direccion.classList.add('is-invalid');
                    isValid = false;
                } else {
                    direccion.classList.remove('is-invalid');
                }
                
                if (!numero.value) {
                    numero.classList.add('is-invalid');
                    isValid = false;
                } else {
                    numero.classList.remove('is-invalid');
                }
                
                return isValid;
            }
            
            // Confirmar dirección
            shippingForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                if (validateShippingForm()) {
                    // Guardar datos en localStorage para usarlos en otras páginas
                    const addressData = {
                        departamento: document.getElementById('departamento').value,
                        provincia: document.getElementById('provincia').value,
                        distrito: document.getElementById('distrito').value,
                        direccion: document.getElementById('direccion').value,
                        numero: document.getElementById('numero').value,
                        complemento: document.getElementById('complemento').value
                    };
                    
                    localStorage.setItem('addressData', JSON.stringify(addressData));
                    
                    // Redirigir a la página de opciones de entrega
                    window.location.href = 'delivery-options.html';
                }
            });
            
            // Descartar cambios
            discardChangesBtn.addEventListener('click', function() {
                shippingForm.reset();
            });
        });
    </script>
</body>
</html>